# |--------------------------------------------------------------------------
# | Orbit commands
# |--------------------------------------------------------------------------
# |
# | TODO

commands:
  - use: "openssl"
    run:
    {{- if eq "local" .EnvFiles.Kickoff.ENV }}
      - orbit generate -t=.docker/.bin/docker-compose-openssl.blueprint.yml -o=.docker/.bin/docker-compose-openssl.yml -v=Kickoff,kickoff.yml -e=Kickoff,.env
      - docker-compose -f .docker/.bin/docker-compose-openssl.yml run openssl
    {{- else }}
      - echo Skipping self-signed certificates generation
    {{- end }}
  - use: "toolbox"
    run:
      - docker exec --user www-data -ti {{ .EnvFiles.Kickoff.ENV }}-{{ .Values.Kickoff.project.name }}-toolbox ash
  - use: "mysql-cli"
    run:
      - docker exec -ti {{ .EnvFiles.Kickoff.ENV }}-{{ .Values.Kickoff.project.name }}-mysql mysql -uroot -p{{ if eq "local" .EnvFiles.Kickoff.ENV }}{{ .EnvFiles.Kickoff.MYSQL_ROOT_PASSWORD }}{{ end }}